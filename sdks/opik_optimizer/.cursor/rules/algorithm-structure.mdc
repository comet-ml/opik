---
description: Standardized structure and implementation patterns for optimizer algorithms
globs: sdks/opik_optimizer/src/opik_optimizer/algorithms/**/*
alwaysApply: false
---
# Optimizer Algorithm Structure Standards

All optimizer algorithms in the Opik Optimizer SDK must follow a standardized structure for consistency, maintainability, and ease of navigation.

## Required Structure

Every optimizer algorithm package MUST have the following structure:

```
{algorithm_name}/
├── __init__.py              # Required: exports optimizer class
├── {algorithm_name}.py      # Required: main optimizer implementation
├── helpers.py               # Required: utility functions
├── types.py                 # Required: type definitions
├── prompts.py               # Required: prompt templates
├── reporting.py             # Required: reporting utilities
├── adapter.py               # Optional: only if algorithm needs adapter
└── ops/                     # Optional: only if algorithm has discrete operations
    ├── __init__.py
    └── {operation}.py
```

## File Requirements

### `__init__.py` (Required)

- Must export the optimizer class
- Use `__all__` to explicitly list exports

### `{algorithm_name}.py` (Required)

- Main optimizer class inheriting from `BaseOptimizer`
- Must implement `run_optimization(context: OptimizationContext) -> AlgorithmResult`
- Optionally implement: `pre_optimization()`, `get_config()`, `get_metadata()`, `_should_stop_context()`
- Define `DEFAULT_PROMPTS: dict[str, str]` class attribute

### `helpers.py` (Required)

- Utility functions used by the optimizer
- Can be minimal/empty if no utilities needed

### `types.py` (Required)

- Type definitions, enums, and data classes
- Can be minimal/empty if no custom types needed

### `prompts.py` (Required)

- LLM prompt templates used by the algorithm
- Can be minimal/empty if algorithm doesn't use LLM prompts

### `reporting.py` (Required)

- Reporting utilities and context managers
- Can import from `...reporting_utils` for standard reporting

## Optional Files

- `adapter.py` - Only if algorithm needs adapter pattern
- `ops/` - Only if algorithm has discrete operations

## Template Reference

See `algorithms/template_optimizer/` for a complete working template.
