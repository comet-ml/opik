---
title: "Optimize Google ADK agents"
description: "Log Google AI Agent Builder runs to Opik and optimize their prompts."
---

Googleâ€™s Agent Developer Kit (ADK) exposes agent flows via REST and event hooks. Combine those hooks with Opik tracing to capture data for optimization. See `sdks/opik_optimizer/scripts/llm_frameworks/adk/` for reference implementations (`adk_agent.py`, `adk_evolutionary_hotpot_example.py`).

## End-to-end flow

<Steps>
  <Step title="Connect ADK to Opik">
    1. Configure ADK to send execution webhooks to a lightweight service.  
    2. In that service, call `opik.traces.log_trace(...)` (or use the `@trace` decorator) to capture turns, tool calls, and metadata.  
    3. Tag traces with the ADK agent version so you can compare runs over time.

    ```python
    from opik import trace

    @trace(name="google-adk-run", metadata={"agent": "support-bot"})
    def handle_adk_webhook(payload):
        # Map ADK fields into Opik spans
        ...
    ```

    - Follow the detailed steps in the [Google ADK tracing guide](/integrations/adk).
  </Step>
  <Step title="Build datasets">
    - Curate your dataset for your agent which can be based on existing traces.
    - Import dataset as CSV/JSON and import them via `opik dataset upload`.  
  </Step>
  <Step title="Optimize">
    - Start with an optimizer like MetaPrompt to refine the instruction prompt.  
    - Switch to Hierarchical Reflective for root-cause reports on failed sessions.  
    - Use `ParameterOptimizer` when you want to tune sampling parameters enforced by ADK policies.
  </Step>
  <Step title="Deploy updates">
    - Replace the ADK prompt definition with the optimized prompt.  
    - Re-run ADK evaluation suites, then monitor traces in Opik to ensure real users see the improvement.
  </Step>
</Steps>

<Info>
  A full ADK reference implementation is on the roadmap. Watch the [changelog](/agent_optimization/getting_started/changelog) for sample apps.
</Info>
